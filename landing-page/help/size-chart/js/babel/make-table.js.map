{"version":3,"sources":["../make-table.js"],"names":["deptCat","require","makeTableHeader","outputTable","module","exports","$","show","trs","each","i","val","attr","remove","tables","dept","cat","sheet","sheets","sheetVal","data","rowData","values","formattedValue","sheetArr","split","sheetDept","sheetCatArr","j","category","rows","colspan","hide","subcat","undefined","merges","endColumnIndex"],"mappings":"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","sourcesContent":["var deptCat = require('./set-dept-cat.js');\r\nvar makeTableHeader = require('./make-table-header.js');\r\nvar outputTable = require('./output-table.js');\r\n\r\nmodule.exports = function() {\r\n  //function to create the tables\r\n  //show .the-table\r\n  $('.size-chart-table .the-table').show();\r\n\r\n  //remove all <tr> except the 1st one\r\n  var trs = $('.size-chart-table table tr');\r\n  $.each(trs, function(i, val) {\r\n    if ($(val).attr('class') !== 'size-chart-header') {\r\n      $(val).remove();\r\n    }\r\n  });\r\n\r\n  //remove all the tables except the .the-table\r\n  var tables = $('.size-chart-table table');\r\n  $.each(tables, function(i, val) {\r\n    if ($(val).attr('class') !== 'the-table') {\r\n      $(val).remove();\r\n    }\r\n  });\r\n\r\n  //the selected values\r\n  var dept = deptCat('.size-chart-container ul.department .selected', '.size-chart-container select.department');\r\n  var cat = deptCat('.size-chart-container ul.category .selected', '.size-chart-container select.category');\r\n\r\n  var sheet = sheets;\r\n\r\n  //loop through sheet and find the matched table\r\n  $.each(sheet, function(i, val) {\r\n    var sheetVal = val.data[0].rowData[2].values[0].formattedValue;\r\n    var sheetArr = sheetVal.split(':');\r\n    var sheetDept = sheetArr[0];\r\n    var sheetCatArr = sheetArr[1].split(',');\r\n    // console.log(sheetCatArr);\r\n\r\n    //if baby\r\n    if (sheetDept == 'baby') {\r\n      sheetDept = ['baby girl', 'baby boy'];\r\n    }\r\n\r\n    //check if dept matches\r\n    if (sheetDept == dept || sheetDept[0] == dept || sheetDept[1] == dept) {\r\n      //check if cat matches\r\n      $.each(sheetCatArr, function(j, category) {\r\n        if (category == cat) {\r\n          // console.log(i,val);\r\n          var rows;\r\n          var colspan;\r\n\r\n          //if newborn department or category is shoes + accessories\r\n          if (dept == 'newborn' || cat == 'shoes + accessories') {\r\n            //hide the top table\r\n            $('.size-chart-container .the-table').hide();\r\n\r\n            var subcat = val.data[0].rowData[2].values[0].formattedValue;\r\n\r\n            //if not newborn\r\n            if (dept !== 'newborn') {\r\n              subcat = subcat.split(',')[1];\r\n            } else {\r\n              //this is newborn\r\n              subcat = subcat.split(',');\r\n\r\n              if (subcat[1] !== undefined) {\r\n                subcat = subcat[1];\r\n              } else {\r\n                subcat = 'all categories';\r\n              }\r\n\r\n            }\r\n\r\n            // console.log(subcat);\r\n\r\n            //if girl\r\n            if (dept == 'girl') {\r\n              rows = makeTableHeader(i, val, dept, subcat);\r\n            }\r\n\r\n            //if boy || baby girl || baby baby\r\n            if (dept == 'boy' || dept == 'baby girl' || dept == 'baby boy') {\r\n              rows = makeTableHeader(i, val, dept, subcat);\r\n            }\r\n\r\n            //if newborn\r\n            if (dept == 'newborn') {\r\n              rows = makeTableHeader(i, val, dept, subcat);\r\n            }\r\n\r\n            //output the table contents\r\n            outputTable(i, val, rows);\r\n\r\n            //stop the function\r\n            return false;\r\n\r\n          } else {\r\n\r\n            rows = val.merges[0].endColumnIndex - 1;\r\n            colspan = val.merges[0].endColumnIndex;\r\n\r\n            //add colspan to .size-chart-header\r\n            $('.size-chart-header th').attr('colspan', colspan);\r\n\r\n            //output the table contents\r\n            outputTable(i, val, rows);\r\n\r\n            //stop the function\r\n            return false;\r\n          }\r\n\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n};"],"file":"make-table.js"}