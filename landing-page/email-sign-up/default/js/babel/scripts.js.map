{"version":3,"sources":["../scripts.js"],"names":["$","document","ready","url","window","location","href","button","find","emailIsValid","email","test","ac","promo","indexOf","paramArr","split","each","i","val","str1","str2","console","log","message","hide","append","show","thanksMessage","click","e","preventDefault","valid","Sailthru","integration","dataLayer","push"],"mappings":"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","sourcesContent":["$(document).ready(function() {\r\n  const url = window.location.href;\r\n  const button = $('.email-wrap').find('button');\r\n\r\n  const emailIsValid = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\r\n  }\r\n\r\n  var ac;\r\n  var promo = null;\r\n  if (url.indexOf('?') !== -1) {\r\n    let paramArr = url.split('?')[1].split('&');\r\n    $.each(paramArr, function(i, val) {\r\n      if (val.indexOf('utm_campaign') !== -1) {\r\n        var str1 = val.split('=')[1];\r\n        ac = str1;\r\n      } else if (val.indexOf('p') !== -1) {\r\n        var str2 = val.split('=')[1];\r\n        promo = str2;\r\n      }\r\n    });\r\n\r\n    console.log(promo);\r\n\r\n    if (promo !== null) {\r\n      const message = `<p>Sign up for exclusive offers, new<br> styles, and ${promo}% off your first order!*</p>`;\r\n      $('.email-wrap .sign-up .default').hide();\r\n      $('.email-wrap .sign-up .promo-message').append(message);\r\n      $('.email-wrap .new-customers').show();\r\n\r\n      const thanksMessage = `<p>Keep an eye on your<br class=\"br-m\"> inbox for ${promo}% off.</p>`;\r\n      $('.email-wrap .thanks .default').hide();\r\n      $('.email-wrap .thanks .promo-message').append(thanksMessage);\r\n    }\r\n\r\n  } else {\r\n    ac = \"email sign up landing page\";\r\n  }\r\n\r\n  $(button).click(function(e) {\r\n    e.preventDefault();\r\n    let email = $('.email-wrap').find('input').val();\r\n    $('.email-wrap .error').hide();\r\n\r\n    // console.log(email, ac, promo);\r\n    var valid = emailIsValid(email);\r\n    // console.log('valid:' + valid);\r\n    if (valid) {\r\n      $('.email-wrap .sign-up .load-more-wrap').show();\r\n      $('.email-wrap .input-fields').hide();\r\n\r\n      Sailthru.integration(\"userSignUp\", {\r\n        \"id\": email,\r\n        \"email\": email,\r\n        \"lists\": {\r\n          \"MASTER_CONTACTS_LIST\": 1\r\n          // \"test list\": 1\r\n        },\r\n        \"vars\": {\r\n          \"ACQUISITION_SOURCE\": ac,\r\n        },\r\n        \"source\": ac,\r\n        \"onSuccess\": function() {\r\n          console.log('sailthru email sign up page success');\r\n          $('.email-wrap .sign-up').hide();\r\n          $('.email-wrap .thanks').show();\r\n          window.dataLayer.push({\r\n            'event':'sailthru',\r\n            'theUrl': url,\r\n            'sailthruEmail': email,\r\n            'sailthruSource': ac\r\n          })\r\n        },\r\n        \"onError\": function() {\r\n          console.log('sailthru email sign up page error');\r\n        }\r\n      });\r\n    } else {\r\n      $('.email-wrap .error').show();\r\n      $('.email-wrap .input-fields').show();\r\n      $('.email-wrap .sign-up .load-more-wrap').hide();\r\n    }\r\n  });\r\n\r\n\r\n});\r\n"],"file":"scripts.js"}